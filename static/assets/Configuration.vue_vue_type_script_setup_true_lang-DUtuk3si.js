import{d as e,f as a,dS as l,r as t,J as o,i as s,o as u,w as i,g as n,a as d,E as m,y as r,x as v,t as f}from"./index-Bsz_-kew.js";import{a as c,E as p}from"./el-form-BuXRuL0p.js";import{a as g,E as _}from"./el-col-CstzfiNs.js";import{E as x}from"./el-switch-DvKrBy-d.js";import{E as y}from"./el-divider-B98uacGM.js";import{E as b}from"./el-text-LCHv_yYZ.js";import{u as w}from"./index-DkjGGqJB.js";import{j as h,o as j,T as V}from"./index-BuCXGCts.js";const C=e({__name:"Configuration",props:{closeDialog:{type:Function},getList:{type:Function},nodeConfForm:{}},setup(e){const C=[h(),j],{t:E}=a(),F=e,{nodeConfForm:M}=l(F),k=t({...M.value}),U=t(!1),z=t(!1),D=t(!1);o((()=>{"1"===k.value.state?(D.value=!0,z.value=!1):"2"===k.value.state?(D.value=!1,z.value=!1):"3"===k.value.state&&(D.value=!1,z.value=!0)}));const L=t(),R=k.value.name;return(e,a)=>(u(),s(d(p),{model:k.value,"label-width":"auto","status-icon":"",ref_key:"ruleFormRef",ref:L},{default:i((()=>[n(d(c),{label:d(E)("node.nodeName"),prop:"name"},{default:i((()=>[n(d(m),{modelValue:k.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.name=e)},null,8,["modelValue"])])),_:1},8,["label"]),n(d(c),{label:"Module Config"},{default:i((()=>[n(d(V),{modelValue:k.value.ModulesConfig,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.ModulesConfig=e),extensions:C,autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"550px",width:"100%"}},null,8,["modelValue"])])),_:1}),n(d(c),{label:d(E)("common.state")},{default:i((()=>[n(d(x),{modelValue:D.value,"onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),"inline-prompt":"","active-text":d(E)("common.switchAction"),"inactive-text":d(E)("common.switchInactive"),disabled:z.value},null,8,["modelValue","active-text","inactive-text","disabled"])])),_:1},8,["label"]),n(d(g),null,{default:i((()=>[n(d(_),{span:16,offset:8},{default:i((()=>[n(d(c),null,{default:i((()=>[n(d(r),{type:"primary",onClick:a[3]||(a[3]=e=>(async e=>{U.value=!0,e&&await e.validate((async(e,a)=>{if(e){let e;e=await w(R,k.value.name,k.value.ModulesConfig,D.value),200===e.code&&(F.getList(),F.closeDialog()),U.value=!1}else U.value=!1}))})(L.value)),loading:U.value},{default:i((()=>[v(f(d(E)("task.save")),1)])),_:1},8,["loading"]),n(d(y),{direction:"vertical"}),n(d(b),{size:"small",type:"danger"},{default:i((()=>[v(f(d(E)("configuration.threadMsg")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]))}});export{C as _};
