import{au as e,I as t,cz as a,ay as r,c4 as l,az as n,bt as o,d as s,ak as i,r as u,q as c,U as d,v,s as m,am as p,a as f,cA as g}from"./index-Bsz_-kew.js";import{c as h,r as y}from"./raf-CfAM2lGy.js";var b=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function S(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(r=e[a],l=t[a],!(r===l||b(r)&&b(l)))return!1;var r,l;return!0}const w=()=>{const r=e().proxy.$props;return t((()=>{const e=(e,t,a)=>({});return r.perfMode?a(e):function(e,t){void 0===t&&(t=S);var a=null;function r(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];if(a&&a.lastThis===this&&t(r,a.lastArgs))return a.lastResult;var n=e.apply(this,r);return a={lastResult:n,lastArgs:r,lastThis:this},n}return r.clear=function(){a=null},r}(e)}))},x=50,N="itemRendered",z="scroll",E="forward",M="backward",I="auto",L="smart",C="start",B="center",R="end",q="horizontal",O="vertical",T="rtl",$="negative",A="positive-ascending",D="positive-descending",F={[q]:"left",[O]:"top"},j=l({type:n([Number,Function]),required:!0}),G=l({type:Number}),k=l({type:Number,default:2}),H=l({type:String,values:["ltr","rtl"],default:"ltr"}),P=l({type:Number,default:0}),V=l({type:Number,required:!0}),K=l({type:String,values:["horizontal","vertical"],default:O}),W=r({className:{type:String,default:""},containerElement:{type:n([String,Object]),default:"div"},data:{type:n(Array),default:()=>o([])},direction:H,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:n([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),U=r({cache:k,estimatedItemSize:G,layout:K,initScrollOffset:P,total:V,itemSize:j,...W}),Y={type:Number,default:6},_={type:Number,default:0},J={type:Number,default:2},Q=r({columnCache:k,columnWidth:j,estimatedColumnWidth:G,estimatedRowHeight:G,initScrollLeft:P,initScrollTop:P,itemKey:{type:n(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:k,rowHeight:j,totalColumn:V,totalRow:V,hScrollbarSize:Y,vScrollbarSize:Y,scrollbarStartGap:_,scrollbarEndGap:J,role:String,...W}),X=r({alwaysOn:Boolean,class:String,layout:K,total:V,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:Y,startGap:_,endGap:J,visible:Boolean}),Z=(e,t)=>e<t?E:M,ee=e=>"ltr"===e||e===T||e===q,te=e=>e===T;let ae=null;function re(e=!1){if(null===ae||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const a=document.createElement("div"),r=a.style;return r.width="100px",r.height="100px",e.appendChild(a),document.body.appendChild(e),e.scrollLeft>0?ae=D:(e.scrollLeft=1,ae=0===e.scrollLeft?$:A),document.body.removeChild(e),ae}return ae}const le=s({name:"ElVirtualScrollBar",props:X,emits:["scroll","start-move","stop-move"],setup(e,{emit:a}){const r=t((()=>e.startGap+e.endGap)),l=i("virtual-scrollbar"),n=i("scrollbar"),o=u(),s=u();let b=null,S=null;const w=c({isDragging:!1,traveled:0}),x=t((()=>g[e.layout])),N=t((()=>e.clientSize-f(r))),z=t((()=>({position:"absolute",width:`${q===e.layout?N.value:e.scrollbarSize}px`,height:`${q===e.layout?e.scrollbarSize:N.value}px`,[F[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"}))),E=t((()=>{const t=e.ratio;if(t>=100)return Number.POSITIVE_INFINITY;if(t>=50)return t*N.value/100;const a=N.value/3;return Math.floor(Math.min(Math.max(t*N.value,20),a))})),M=t((()=>{if(!Number.isFinite(E.value))return{display:"none"};const t=`${E.value}px`,a=function({move:e,size:t,bar:a},r){const l={},n=`translate${a.axis}(${e}px)`;return l[a.size]=t,l.transform=n,"horizontal"===r?l.height="100%":l.width="100%",l}({bar:x.value,size:t,move:w.traveled},e.layout);return a})),I=t((()=>Math.ceil(e.clientSize-E.value-f(r)))),L=()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",B),document.onselectstart=S,S=null;const e=f(s);e&&(e.removeEventListener("touchmove",R),e.removeEventListener("touchend",B))},C=e=>{e.stopImmediatePropagation(),e.ctrlKey||[1,2].includes(e.button)||(w.isDragging=!0,w[x.value.axis]=e.currentTarget[x.value.offset]-(e[x.value.client]-e.currentTarget.getBoundingClientRect()[x.value.direction]),a("start-move"),(()=>{window.addEventListener("mousemove",R),window.addEventListener("mouseup",B);const e=f(s);e&&(S=document.onselectstart,document.onselectstart=()=>!1,e.addEventListener("touchmove",R,{passive:!0}),e.addEventListener("touchend",B))})())},B=()=>{w.isDragging=!1,w[x.value.axis]=0,a("stop-move"),L()},R=e=>{const{isDragging:t}=w;if(!t)return;if(!s.value||!o.value)return;const r=w[x.value.axis];if(!r)return;h(b);const l=-1*(o.value.getBoundingClientRect()[x.value.direction]-e[x.value.client])-(s.value[x.value.offset]-r);b=y((()=>{w.traveled=Math.max(0,Math.min(l,I.value)),a("scroll",l,I.value)}))},O=e=>{const t=Math.abs(e.target.getBoundingClientRect()[x.value.direction]-e[x.value.client])-s.value[x.value.offset]/2;w.traveled=Math.max(0,Math.min(t,I.value)),a("scroll",t,I.value)};return d((()=>e.scrollFrom),(e=>{w.isDragging||(w.traveled=Math.ceil(e*I.value))})),v((()=>{L()})),()=>m("div",{role:"presentation",ref:o,class:[l.b(),e.class,(e.alwaysOn||w.isDragging)&&"always-on"],style:z.value,onMousedown:p(O,["stop","prevent"]),onTouchstartPrevent:C},m("div",{ref:s,class:n.e("thumb"),style:M.value,onMousedown:C},[]))}});export{I as A,M as B,B as C,x as D,R as E,E as F,q as H,N as I,T as R,z as S,O as V,le as a,A as b,$ as c,Z as d,D as e,C as f,re as g,L as h,ee as i,Q as j,X as k,te as l,w as u,U as v};
