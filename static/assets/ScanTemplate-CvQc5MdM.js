import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-B9UYKo8h.js";import{d as t,f as a,r as l,q as o,g as i,L as s,F as r,H as n,M as p,c as m,o as u,w as d,a as c,h as g,x as f,t as j,E as v,y,O as _,P as h}from"./index-C335Dbyp.js";import{a as x,E as b}from"./el-col-CoU3axbs.js";import{E as w}from"./el-text-Db18Yw9k.js";import{_ as S}from"./Table.vue_vue_type_script_lang-B0GMEQiF.js";import{u as k}from"./useTable-0ZX8kjQl.js";import{u as T}from"./useIcon-CkTT0Usi.js";import{f as C,h as A}from"./index-nItDL_e6.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-D8ePpfD3.js";import z from"./DetailTemplate-CVhzJ-nT.js";import"./el-card-BWWcY-2r.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-BdVQ-fi9.js";import"./index-BWY9zJxx.js";import"./el-table-column-zfPBTCuQ.js";import"./isArrayLikeObject-B04zdnTS.js";import"./index-9a9sxpBE.js";import"./debounce-Bhx9ODHg.js";import"./el-checkbox-CqOvfBK0.js";import"./raf-iuS8F68J.js";import"./el-tag-DSkaNW9P.js";import"./el-pagination-C3mrmel7.js";import"./el-select-DxgVe2hv.js";import"./strings-BnBs96OV.js";import"./castArray-DcfcP02G.js";import"./index-DcJJBfbp.js";import"./el-image-viewer-CIXae_eq.js";import"./el-empty-CowUXZlY.js";import"./tsxHelper-Fpww6XuK.js";import"./el-dropdown-item-ypTXrub9.js";import"./refs-Dt1UrLcT.js";import"./index-DJomGW97.js";import"./index-D4TQOvlj.js";import"./el-switch-B1hfvIWf.js";import"./el-form-UGjKpEwN.js";import"./el-virtual-list-B4IL-mhu.js";import"./el-select-v2-4evr8ql9.js";/* empty css                */import"./index-CXxCiI03.js";import"./index-2Y-wxM3q.js";const D={class:"mb-10px"},L={style:{position:"relative",top:"12px"}};function P(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!h(e)}const U=t({__name:"ScanTemplate",setup(t){const h=T({icon:"iconoir:search"}),{t:U}=a(),H=l(""),N=()=>{J()},O=o([{field:"selection",type:"selection",minWidth:55},{field:"name",label:U("task.templateName")},{field:"action",label:U("tableDemo.action"),formatter:(e,t,a)=>{let l,o;return i(r,null,[i(s,{type:"success",onClick:()=>ne(e.id)},P(l=U("common.edit"))?l:{default:()=>[l]}),i(s,{type:"danger",onClick:()=>$(e)},P(o=U("common.delete"))?o:{default:()=>[o]})])}}]),{tableRegister:V,tableState:I,tableMethods:R}=k({fetchDataApi:async()=>{const{currentPage:e,pageSize:t}=I,a=await A(H.value,e.value,t.value);return{list:a.data.list,total:a.data.total}},immediate:!0}),{loading:M,dataList:F,total:q,currentPage:B,pageSize:W}=I;W.value=20;const{getList:J,getElTableExpose:K}=R;function G(){return{background:"var(--el-fill-color-light)"}}const Q=l(!1);let X=U("task.addTemplate");const Y=()=>{Q.value=!1},Z=async()=>{n({title:"Delete",draggable:!0}).then((async()=>{await le()}))},$=async e=>{n({title:"Delete",draggable:!0}).then((async()=>{await te(e)}))},ee=l(!1),te=async e=>{ee.value=!0;try{await C([e.id]);ee.value=!1,J()}catch(t){ee.value=!1,J()}},ae=l([]),le=async()=>{const e=await K(),t=(null==e?void 0:e.getSelectionRows())||[];ae.value=t.map((e=>e.id)),ee.value=!0;try{await C(ae.value);ee.value=!1,J()}catch(a){ee.value=!1,J()}};p((()=>{ie(),window.addEventListener("resize",ie)}));const oe=l(0),ie=()=>{const e=window.innerHeight||document.documentElement.clientHeight;oe.value=.8*e},se=async()=>{re.value="",X=U("task.addTemplate"),Q.value=!0},re=l(""),ne=async e=>{re.value=e,X=U("task.editTemplate"),Q.value=!0};return(t,a)=>(u(),m(r,null,[i(c(e),null,{default:d((()=>[i(c(x),null,{default:d((()=>[i(c(b),{span:1},{default:d((()=>[i(c(w),{class:"mx-1",style:{position:"relative",top:"8px"}},{default:d((()=>[f(j(c(U)("task.templateName"))+": ",1)])),_:1})])),_:1}),i(c(b),{span:5},{default:d((()=>[i(c(v),{modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),placeholder:c(U)("common.inputText"),style:{height:"38px"}},null,8,["modelValue","placeholder"])])),_:1}),i(c(b),{span:5,style:{position:"relative",left:"16px"}},{default:d((()=>[i(c(y),{type:"primary",icon:c(h),style:{height:"100%"},onClick:N},{default:d((()=>[f("Search")])),_:1},8,["icon"])])),_:1})])),_:1}),i(c(x),null,{default:d((()=>[i(c(b),{style:{position:"relative",top:"16px"}},{default:d((()=>[g("div",D,[i(c(s),{type:"primary",onClick:se},{default:d((()=>[f(j(c(U)("task.addTemplate")),1)])),_:1}),i(c(s),{type:"danger",loading:ee.value,onClick:Z},{default:d((()=>[f(j(c(U)("task.deleteTemplate")),1)])),_:1},8,["loading"])])])),_:1})])),_:1}),g("div",L,[i(c(S),{"tooltip-options":{offset:1,showArrow:!1,effect:"dark",enterable:!1,showAfter:0,popperOptions:{},popperClass:"test",placement:"bottom",hideAfter:0,disabled:!0},pageSize:c(W),"onUpdate:pageSize":a[1]||(a[1]=e=>_(W)?W.value=e:null),currentPage:c(B),"onUpdate:currentPage":a[2]||(a[2]=e=>_(B)?B.value=e:null),columns:O,data:c(F),stripe:"",border:!0,loading:c(M),"max-height":oe.value,resizable:!0,pagination:{total:c(q),pageSizes:[20,30,50,100,200,500,1e3]},onRegister:c(V),headerCellStyle:G,style:{fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji"}},null,8,["pageSize","currentPage","columns","data","loading","max-height","pagination","onRegister"])])])),_:1}),i(c(E),{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.value=e),title:c(X),center:"",fullscreen:"",style:{"border-radius":"15px","box-shadow":"5px 5px 10px rgb(0 0 0 / 30%)"}},{default:d((()=>[i(z,{closeDialog:Y,getList:c(J),id:re.value},null,8,["getList","id"])])),_:1},8,["modelValue","title"])],64))}});export{U as default};
