import{al as e,d as t,c as l,o as a,t as o,aY as s,n,ak as i,ad as r,bK as u,ay as c,aD as d,aC as p,b7 as f,aO as m,N as v,bv as h,az as g,aP as b,a_ as S,aN as y,bl as x,ar as w,h as O,am as V,aq as I,cr as C,J as T,s as M,F as z,b5 as R,r as E,au as k,bC as L,M as B,aH as $,a as D,ci as N,cB as F,a3 as H,b8 as K,S as W,g as P,bd as A,aJ as j,bz as _,bP as q,aw as U,cs as G,as as Q,aR as J,bb as X,aS as Y,q as Z,aT as ee,bc as te,b2 as le,aU as ae,b9 as oe,aW as se,ah as ne,av as ie,cu as re,z as ue,B as ce,A as de,w as pe,aZ as fe,bV as me,bW as ve,j as he,i as ge,G as be,x as Se,a$ as ye,b0 as xe,aX as we,C as Oe,bD as Ve,aE as Ie,aM as Ce}from"./index-C335Dbyp.js";import{u as Te,a as Me,E as ze}from"./el-popper-BdVQ-fi9.js";import{t as Re,E as Ee}from"./el-tag-DSkaNW9P.js";import{V as ke,H as Le,I as Be,S as $e,v as De,a as Ne,u as Fe,R as He,g as Ke,b as We,c as Pe,A as Ae,d as je,B as _e,F as qe,i as Ue,e as Ge,C as Qe,E as Je,f as Xe,h as Ye,D as Ze}from"./el-virtual-list-B4IL-mhu.js";import{c as et,r as tt}from"./raf-iuS8F68J.js";import{e as lt}from"./strings-BnBs96OV.js";import{d as at}from"./debounce-Bhx9ODHg.js";import{f as ot,u as st}from"./index-DcJJBfbp.js";import{i as nt,C as it}from"./index-9a9sxpBE.js";var rt=e(t({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup:()=>({ns:i("select")})}),[["render",function(e,t,i,r,u,c){return a(),l("div",{class:n(e.ns.be("group","title")),style:s({...e.style,lineHeight:`${e.height}px`})},o(e.item.label),7)}],["__file","group-item.vue"]]);const ut={label:"label",value:"value",disabled:"disabled",options:"options"};function ct(e){const t=r((()=>({...ut,...e.props})));return{aliasProps:t,getLabel:e=>u(e,t.value.label),getValue:e=>u(e,t.value.value),getDisabled:e=>u(e,t.value.disabled),getOptions:e=>u(e,t.value.options)}}const dt=c({allowCreate:Boolean,autocomplete:{type:g(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:h,default:S},effect:{type:g(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:g([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:g(Array),required:!0},placeholder:{type:String},teleported:Te.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:g(Object),default:()=>({})},remote:Boolean,size:b,props:{type:g(Object),default:()=>ut},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:g(String),values:Me,default:"bottom-start"},fallbackPlacements:{type:g(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Re.type,default:"info"},tagEffect:{...Re.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:Te.appendTo,fitInputWidth:{type:[Boolean,Number],default:!0,validator:e=>y(e)||x(e)},suffixIcon:{type:h,default:v},...m,...f(["ariaLabel"])}),pt=c({data:Array,disabled:Boolean,hovering:Boolean,item:{type:g(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),ft={[p]:e=>!0,[d]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},mt={hover:e=>x(e),select:(e,t)=>!0},vt=Symbol("ElSelectV2Injection");var ht=e(t({props:pt,emits:mt,setup(e,{emit:t}){const l=I(vt),a=i("select"),{hoverItem:o,selectOptionClick:s}=function(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}(e,{emit:t}),{getLabel:n}=ct(l.props);return{ns:a,hoverItem:o,selectOptionClick:s,getLabel:n}}}),[["render",function(e,t,i,r,u,c){return a(),l("li",{"aria-selected":e.selected,style:s(e.style),class:n([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:e.hoverItem,onClick:V(e.selectOptionClick,["stop"])},[w(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},(()=>[O("span",null,o(e.getLabel(e.item)),1)]))],46,["aria-selected","onMousemove","onClick"])}],["__file","option-item.vue"]]);const gt={[Le]:"deltaX",[ke]:"deltaY"},bt=({name:e,getOffset:l,getItemSize:a,getItemOffset:o,getEstimatedTotalSize:s,getStartIndexForOffset:n,getStopIndexForStartIndex:u,initCache:c,clearCache:d,validateProps:p})=>t({name:null!=e?e:"ElVirtualList",props:De,emits:[Be,$e],setup(e,{emit:t,expose:f}){p(e);const m=k(),v=i("vl"),h=E(c(e,m)),g=Fe(),b=E(),S=E(),y=E(),w=E({isScrolling:!1,scrollDir:"forward",scrollOffset:x(e.initScrollOffset)?e.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:e.scrollbarAlwaysOn}),O=r((()=>{const{total:t,cache:l}=e,{isScrolling:a,scrollDir:o,scrollOffset:s}=D(w);if(0===t)return[0,0,0,0];const i=n(e,s,D(h)),r=u(e,i,s,D(h)),c=a&&o!==_e?1:Math.max(1,l),d=a&&o!==qe?1:Math.max(1,l);return[Math.max(0,i-c),Math.max(0,Math.min(t-1,r+d)),i,r]})),V=r((()=>s(e,D(h)))),I=r((()=>Ue(e.layout))),T=r((()=>[{position:"relative",["overflow-"+(I.value?"x":"y")]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:x(e.height)?`${e.height}px`:e.height,width:x(e.width)?`${e.width}px`:e.width},e.style])),M=r((()=>{const e=D(V),t=D(I);return{height:t?"100%":`${e}px`,pointerEvents:D(w).isScrolling?"none":void 0,width:t?`${e}px`:"100%"}})),z=r((()=>I.value?e.width:e.height)),{onWheel:R}=(({atEndEdge:e,atStartEdge:t,layout:l},a)=>{let o,s=0;const n=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:n,onWheel:e=>{et(o);const t=e[gt[l.value]];n(s)&&n(s+t)||(s+=t,C()||e.preventDefault(),o=tt((()=>{a(s),s=0})))}}})({atStartEdge:r((()=>w.value.scrollOffset<=0)),atEndEdge:r((()=>w.value.scrollOffset>=V.value)),layout:r((()=>e.layout))},(e=>{var t,l;null==(l=(t=y.value).onMouseUp)||l.call(t),P(Math.min(w.value.scrollOffset+e,V.value-z.value))}));L(b,"wheel",R,{passive:!1});const W=()=>{const{total:l}=e;if(l>0){const[e,l,a,o]=D(O);t(Be,e,l,a,o)}const{scrollDir:a,scrollOffset:o,updateRequested:s}=D(w);t($e,a,o,s)},P=e=>{(e=Math.max(e,0))!==D(w).scrollOffset&&(w.value={...D(w),scrollOffset:e,scrollDir:je(D(w).scrollOffset,e),updateRequested:!0},H(j))},A=(t,a=Ae)=>{const{scrollOffset:o}=D(w);t=Math.max(0,Math.min(t,e.total-1)),P(l(e,t,a,o,D(h)))},j=()=>{w.value.isScrolling=!1,H((()=>{g.value(-1,null,null)}))},_=()=>{const e=b.value;e&&(e.scrollTop=0)};B((()=>{if(!$)return;const{initScrollOffset:t}=e,l=D(b);x(t)&&l&&(D(I)?l.scrollLeft=t:l.scrollTop=t),W()})),N((()=>{const{direction:t,layout:l}=e,{scrollOffset:a,updateRequested:o}=D(w),s=D(b);if(o&&s)if(l===Le)if(t===He)switch(Ke()){case Pe:s.scrollLeft=-a;break;case We:s.scrollLeft=a;break;default:{const{clientWidth:e,scrollWidth:t}=s;s.scrollLeft=t-e-a;break}}else s.scrollLeft=a;else s.scrollTop=a})),F((()=>{D(b).scrollTop=D(w).scrollOffset}));const q={ns:v,clientSize:z,estimatedTotalSize:V,windowStyle:T,windowRef:b,innerRef:S,innerStyle:M,itemsToRender:O,scrollbarRef:y,states:w,getItemStyle:t=>{const{direction:l,itemSize:s,layout:n}=e,i=g.value(d&&s,d&&n,d&&l);let r;if(K(i,String(t)))r=i[t];else{const s=o(e,t,D(h)),n=a(e,t,D(h)),u=D(I),c=l===He,d=u?s:0;i[t]=r={position:"absolute",left:c?void 0:`${d}px`,right:c?`${d}px`:void 0,top:u?0:`${s}px`,height:u?"100%":`${n}px`,width:u?`${n}px`:"100%"}}return r},onScroll:t=>{D(I)?(t=>{const{clientWidth:l,scrollLeft:a,scrollWidth:o}=t.currentTarget,s=D(w);if(s.scrollOffset===a)return;const{direction:n}=e;let i=a;if(n===He)switch(Ke()){case Pe:i=-a;break;case Ge:i=o-l-a}i=Math.max(0,Math.min(i,o-l)),w.value={...s,isScrolling:!0,scrollDir:je(s.scrollOffset,i),scrollOffset:i,updateRequested:!1},H(j)})(t):(e=>{const{clientHeight:t,scrollHeight:l,scrollTop:a}=e.currentTarget,o=D(w);if(o.scrollOffset===a)return;const s=Math.max(0,Math.min(a,l-t));w.value={...o,isScrolling:!0,scrollDir:je(o.scrollOffset,s),scrollOffset:s,updateRequested:!1},H(j)})(t),W()},onScrollbarScroll:(e,t)=>{const l=(V.value-z.value)/t*e;P(Math.min(V.value-z.value,l))},onWheel:R,scrollTo:P,scrollToItem:A,resetScrollTop:_};return f({windowRef:b,innerRef:S,getItemStyleCache:g,scrollTo:P,scrollToItem:A,resetScrollTop:_,states:w}),q},render(e){var t;const{$slots:l,className:a,clientSize:o,containerElement:s,data:n,getItemStyle:i,innerElement:r,itemsToRender:u,innerStyle:c,layout:d,total:p,onScroll:f,onScrollbarScroll:m,states:v,useIsScrolling:h,windowStyle:g,ns:b}=e,[S,y]=u,x=T(s),w=T(r),O=[];if(p>0)for(let T=S;T<=y;T++)O.push(M(z,{key:T},null==(t=l.default)?void 0:t.call(l,{data:n,index:T,isScrolling:h?v.isScrolling:void 0,style:i(T)})));const V=[M(w,{style:c,ref:"innerRef"},R(w)?O:{default:()=>O})],I=M(Ne,{ref:"scrollbarRef",clientSize:o,layout:d,onScroll:m,ratio:100*o/this.estimatedTotalSize,scrollFrom:v.scrollOffset/(this.estimatedTotalSize-o),total:p}),C=M(x,{class:[b.e("window"),a],style:g,onScroll:f,ref:"windowRef",key:0},R(x)?[V]:{default:()=>[V]});return M("div",{key:0,class:[b.e("wrapper"),v.scrollbarAlwaysOn?"always-on":""]},[C,I])}}),St=bt({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:l,layout:a,width:o},s,n,i)=>{const r=Ue(a)?o:e,u=Math.max(0,t*l-r),c=Math.min(u,s*l),d=Math.max(0,(s+1)*l-r);switch(n===Ye&&(n=i>=d-r&&i<=c+r?Ae:Qe),n){case Xe:return c;case Je:return d;case Qe:{const e=Math.round(d+(c-d)/2);return e<Math.ceil(r/2)?0:e>u+Math.floor(r/2)?u:e}default:return i>=d&&i<=c?i:i<d?d:c}},getStartIndexForOffset:({total:e,itemSize:t},l)=>Math.max(0,Math.min(e-1,Math.floor(l/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:l,layout:a,width:o},s,n)=>{const i=s*l,r=Ue(a)?o:e,u=Math.ceil((r+n-i)/l);return Math.max(0,Math.min(t-1,s+u-1))},initCache(){},clearCache:!0,validateProps(){}}),yt=(e,t,l)=>{const{itemSize:a}=e,{items:o,lastVisitedIndex:s}=l;if(t>s){let e=0;if(s>=0){const t=o[s];e=t.offset+t.size}for(let l=s+1;l<=t;l++){const t=a(l);o[l]={offset:e,size:t},e+=t}l.lastVisitedIndex=t}return o[t]},xt=(e,t,l,a,o)=>{for(;l<=a;){const s=l+Math.floor((a-l)/2),n=yt(e,s,t).offset;if(n===o)return s;n<o?l=s+1:n>o&&(a=s-1)}return Math.max(0,l-1)},wt=(e,t,l,a)=>{const{total:o}=e;let s=1;for(;l<o&&yt(e,l,t).offset<a;)l+=s,s*=2;return xt(e,t,Math.floor(l/2),Math.min(l,o-1),a)},Ot=({total:e},{items:t,estimatedItemSize:l,lastVisitedIndex:a})=>{let o=0;if(a>=e&&(a=e-1),a>=0){const e=t[a];o=e.offset+e.size}return o+(e-a-1)*l},Vt=bt({name:"ElDynamicSizeList",getItemOffset:(e,t,l)=>yt(e,t,l).offset,getItemSize:(e,t,{items:l})=>l[t].size,getEstimatedTotalSize:Ot,getOffset:(e,t,l,a,o)=>{const{height:s,layout:n,width:i}=e,r=Ue(n)?i:s,u=yt(e,t,o),c=Ot(e,o),d=Math.max(0,Math.min(c-r,u.offset)),p=Math.max(0,u.offset-r+u.size);switch(l===Ye&&(l=a>=p-r&&a<=d+r?Ae:Qe),l){case Xe:return d;case Je:return p;case Qe:return Math.round(p+(d-p)/2);default:return a>=p&&a<=d?a:a<p?p:d}},getStartIndexForOffset:(e,t,l)=>((e,t,l)=>{const{items:a,lastVisitedIndex:o}=t;return(o>0?a[o].offset:0)>=l?xt(e,t,0,o,l):wt(e,t,Math.max(0,o),l)})(e,l,t),getStopIndexForStartIndex:(e,t,l,a)=>{const{height:o,total:s,layout:n,width:i}=e,r=Ue(n)?i:o,u=yt(e,t,a),c=l+r;let d=u.offset+u.size,p=t;for(;p<s-1&&d<c;)p++,d+=yt(e,p,a).size;return p},initCache({estimatedItemSize:e=Ze},t){const l={items:{},estimatedItemSize:e,lastVisitedIndex:-1,clearCacheAfterIndex:(e,a=!0)=>{var o,s;l.lastVisitedIndex=Math.min(l.lastVisitedIndex,e-1),null==(o=t.exposed)||o.getItemStyleCache(-1),a&&(null==(s=t.proxy)||s.$forceUpdate())}};return l},clearCache:!1,validateProps:({itemSize:e})=>{}}),It={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var Ct=t({name:"ElSelectDropdown",props:It,setup(e,{slots:t,expose:l}){const a=I(vt),o=i("select"),{getLabel:s,getValue:n,getDisabled:c}=ct(a.props),d=E([]),p=E(),f=r((()=>e.data.length));W((()=>f.value),(()=>{var e,t;null==(t=null==(e=a.tooltipRef.value)?void 0:e.updatePopper)||t.call(e)}));const m=r((()=>U(a.props.estimatedOptionHeight))),v=r((()=>m.value?{itemSize:a.props.itemHeight}:{estimatedSize:a.props.estimatedOptionHeight,itemSize:e=>d.value[e]})),h=(e,t)=>a.props.multiple?((e=[],t)=>{const{props:{valueKey:l}}=a;return _(t)?e&&e.some((e=>q(u(e,l))===u(t,l))):e.includes(t)})(e,n(t)):((e,t)=>{if(_(t)){const{valueKey:l}=a.props;return u(e,l)===u(t,l)}return e===t})(e,n(t)),g=(e,t)=>{const{disabled:l,multiple:o,multipleLimit:s}=a.props;return l||!t&&!!o&&s>0&&e.length>=s},b=t=>e.hoveringIndex===t;l({listRef:p,isSized:m,isItemDisabled:g,isItemHovering:b,isItemSelected:h,scrollToItem:e=>{const t=p.value;t&&t.scrollToItem(e)},resetScrollTop:()=>{const e=p.value;e&&e.resetScrollTop()}});const S=e=>{const{index:l,data:o,style:n}=e,i=D(m),{itemSize:r,estimatedSize:u}=D(v),{modelValue:d}=a.props,{onSelect:p,onHover:f}=a,S=o[l];if("Group"===S.type)return P(rt,{item:S,style:n,height:i?r:u},null);const y=h(d,S),x=g(d,y),w=b(l);return P(ht,A(e,{selected:y,disabled:c(S)||x,created:!!S.created,hovering:w,item:S,onSelect:p,onHover:f}),{default:e=>{var l;return(null==(l=t.default)?void 0:l.call(t,e))||P("span",null,[s(S)])}})},{onKeyboardNavigate:y,onKeyboardSelect:x}=a,w=e=>{const{code:t}=e,{tab:l,esc:a,down:o,up:s,enter:n,numpadEnter:i}=j;switch([a,o,s,n,i].includes(t)&&(e.preventDefault(),e.stopPropagation()),t){case l:case a:break;case o:y("forward");break;case s:y("backward");break;case n:case i:x()}};return()=>{var l,s,n,i;const{data:u,width:c}=e,{height:d,multiple:f,scrollbarAlwaysOn:h}=a.props,g=r((()=>!!G||h)),b=D(m)?St:Vt;return P("div",{class:[o.b("dropdown"),o.is("multiple",f)],style:{width:`${c}px`}},[null==(l=t.header)?void 0:l.call(t),(null==(s=t.loading)?void 0:s.call(t))||(null==(n=t.empty)?void 0:n.call(t))||P(b,A({ref:p},D(v),{className:o.be("dropdown","list"),scrollbarAlwaysOn:g.value,data:u,height:d,width:c,total:u.length,onKeydown:w}),{default:e=>P(S,e,null)}),null==(i=t.footer)?void 0:i.call(t)])}}});function Tt(e,t){const{aliasProps:l,getLabel:a,getValue:o}=ct(e),s=E(0),n=E(),i=r((()=>e.allowCreate&&e.filterable));return{createNewOption:function(o){if(i.value)if(o&&o.length>0){if(function(l){const o=e=>a(e)===l;return e.options&&e.options.some(o)||t.createdOptions.some(o)}(o))return;const n={[l.value.value]:o,[l.value.label]:o,created:!0,[l.value.disabled]:!1};t.createdOptions.length>=s.value?t.createdOptions[s.value]=n:t.createdOptions.push(n)}else if(e.multiple)t.createdOptions.length=s.value;else{const e=n.value;t.createdOptions.length=0,e&&e.created&&t.createdOptions.push(e)}},removeNewOption:function(l){if(!i.value||!l||!l.created||l.created&&e.reserveKeyword&&t.inputValue===a(l))return;const n=t.createdOptions.findIndex((e=>o(e)===o(l)));~n&&(t.createdOptions.splice(n,1),s.value--)},selectNewOption:function(t){i.value&&(e.multiple&&t.created?s.value++:n.value=t)},clearAllNewOption:function(){i.value&&(t.createdOptions.length=0,s.value=0)}}}const Mt=(e,t)=>{const{t:l}=Q(),a=i("select"),o=i("input"),{form:s,formItem:n}=J(),{inputId:c}=X(e,{formItemContext:n}),{aliasProps:f,getLabel:m,getValue:v,getDisabled:h,getOptions:g}=ct(e),{valueOnClear:b,isEmptyValue:S}=Y(e),y=Z({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),w=E(-1),O=E(),V=E(),I=E(),C=E(),T=E(),M=E(),z=E(),R=E(),k=E(),L=E(),{isComposing:$,handleCompositionStart:D,handleCompositionEnd:N,handleCompositionUpdate:F}=ee({afterComposition:e=>dt(e)}),{wrapperRef:K,isFocused:P,handleBlur:A}=te(T,{beforeFocus:()=>de.value,afterFocus(){e.automaticDropdown&&!ce.value&&(ce.value=!0,y.menuVisibleOnFocus=!0)},beforeBlur(e){var t,l;return(null==(t=I.value)?void 0:t.isFocusInsideContent(e))||(null==(l=C.value)?void 0:l.isFocusInsideContent(e))},afterBlur(){var t;ce.value=!1,y.menuVisibleOnFocus=!1,e.validateEvent&&(null==(t=null==n?void 0:n.validate)||t.call(n,"blur").catch((e=>le())))}}),q=r((()=>we(""))),G=r((()=>!e.loading&&(e.options.length>0||y.createdOptions.length>0))),ue=E([]),ce=E(!1),de=r((()=>e.disabled||(null==s?void 0:s.disabled))),pe=r((()=>{var e;return null!=(e=null==s?void 0:s.statusIcon)&&e})),fe=r((()=>{const t=ue.value.length*e.itemHeight;return t>e.height?e.height:t})),me=r((()=>e.multiple?ne(e.modelValue)&&e.modelValue.length>0:!S(e.modelValue))),ve=r((()=>e.clearable&&!de.value&&y.inputHovering&&me.value)),he=r((()=>e.remote&&e.filterable?"":e.suffixIcon)),ge=r((()=>he.value&&a.is("reverse",ce.value))),be=r((()=>(null==n?void 0:n.validateState)||"")),Se=r((()=>{if(be.value)return re[be.value]})),ye=r((()=>e.remote?300:0)),xe=r((()=>e.loading?e.loadingText||l("el.select.loading"):!(e.remote&&!y.inputValue&&!G.value)&&(e.filterable&&y.inputValue&&G.value&&0===ue.value.length?e.noMatchText||l("el.select.noMatch"):G.value?null:e.noDataText||l("el.select.noData")))),we=t=>{const l=new RegExp(lt(t),"i"),a=e.filterable&&ie(e.filterMethod),o=e.filterable&&e.remote&&ie(e.remoteMethod),s=e=>!(!a&&!o)||(!t||l.test(m(e)||""));return e.loading?[]:[...y.createdOptions,...e.options].reduce(((t,l)=>{const a=g(l);if(ne(a)){const e=a.filter(s);e.length>0&&t.push({label:m(l),type:"Group"},...e)}else(e.remote||s(l))&&t.push(l);return t}),[])},Oe=()=>{ue.value=we(y.inputValue)},Ve=r((()=>{const e=new Map;return q.value.forEach(((t,l)=>{e.set(Xe(v(t)),{option:t,index:l})})),e})),Ie=r((()=>{const e=new Map;return ue.value.forEach(((t,l)=>{e.set(Xe(v(t)),{option:t,index:l})})),e})),Ce=r((()=>ue.value.every((e=>h(e))))),Te=ae(),Me=r((()=>"small"===Te.value?"small":"default")),ze=()=>{var t;if(x(e.fitInputWidth))return void(w.value=e.fitInputWidth);const l=(null==(t=O.value)?void 0:t.offsetWidth)||200;!e.fitInputWidth&&G.value?H((()=>{w.value=Math.max(l,Re())})):w.value=l},Re=()=>{var e,t;const l=document.createElement("canvas").getContext("2d"),o=a.be("dropdown","item"),s=((null==(t=null==(e=R.value)?void 0:e.listRef)?void 0:t.innerRef)||document).querySelector(`.${o}`);if(null===s||null===l)return 0;const n=getComputedStyle(s),i=Number.parseFloat(n.paddingLeft)+Number.parseFloat(n.paddingRight);l.font=`bold ${n.font.replace(new RegExp(`\\b${n.fontWeight}\\b`),"")}`;return ue.value.reduce(((e,t)=>{const a=l.measureText(m(t));return Math.max(a.width,e)}),0)+i},Ee=r((()=>{const t=(()=>{if(!V.value)return 0;const e=window.getComputedStyle(V.value);return Number.parseFloat(e.gap||"6px")})();return{maxWidth:`${L.value&&1===e.maxCollapseTags?y.selectionWidth-y.collapseItemWidth-t:y.selectionWidth}px`}})),ke=r((()=>({maxWidth:`${y.selectionWidth}px`}))),Le=r((()=>ne(e.modelValue)?0===e.modelValue.length&&!y.inputValue:!e.filterable||!y.inputValue)),Be=r((()=>{var t;const a=null!=(t=e.placeholder)?t:l("el.select.placeholder");return e.multiple||!me.value?a:y.selectedLabel})),$e=r((()=>{var e,t;return null==(t=null==(e=I.value)?void 0:e.popperRef)?void 0:t.contentRef})),De=r((()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&Ie.value.has(e.modelValue[t-1])){const{index:l}=Ie.value.get(e.modelValue[t-1]);return l}}else if(!S(e.modelValue)&&Ie.value.has(e.modelValue)){const{index:t}=Ie.value.get(e.modelValue);return t}return-1})),Ne=r({get:()=>ce.value&&!1!==xe.value,set(e){ce.value=e}}),Fe=r((()=>e.multiple?e.collapseTags?y.cachedOptions.slice(0,e.maxCollapseTags):y.cachedOptions:[])),He=r((()=>e.multiple&&e.collapseTags?y.cachedOptions.slice(e.maxCollapseTags):[])),{createNewOption:Ke,removeNewOption:We,selectNewOption:Pe,clearAllNewOption:Ae}=Tt(e,y),je=()=>{de.value||(y.menuVisibleOnFocus?y.menuVisibleOnFocus=!1:ce.value=!ce.value)},_e=()=>{y.inputValue.length>0&&!ce.value&&(ce.value=!0),Ke(y.inputValue),Ue(y.inputValue)},qe=at(_e,ye.value),Ue=t=>{y.previousQuery===t||$.value||(y.previousQuery=t,e.filterable&&ie(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&ie(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&ue.value.length?H(Ge):H(ut))},Ge=()=>{const e=ue.value.filter((e=>!e.disabled&&"Group"!==e.type)),t=e.find((e=>e.created)),l=e[0];y.hoveringIndex=Je(ue.value,t||l)},Qe=l=>{t(p,l),(l=>{nt(e.modelValue,l)||t(d,l)})(l),y.previousValue=e.multiple?String(l):l,H((()=>{if(e.multiple&&ne(e.modelValue)){const t=y.cachedOptions.slice(),l=e.modelValue.map((e=>ft(e,t)));nt(y.cachedOptions,l)||(y.cachedOptions=l)}else mt(!0)}))},Je=(t=[],l)=>{if(!_(l))return t.indexOf(l);const a=e.valueKey;let o=-1;return t.some(((e,t)=>u(e,a)===u(l,a)&&(o=t,!0))),o},Xe=t=>_(t)?u(t,e.valueKey):t,Ye=()=>{ze()},Ze=()=>{y.selectionWidth=Number.parseFloat(window.getComputedStyle(V.value).width)},et=()=>{var e,t;null==(t=null==(e=I.value)?void 0:e.updatePopper)||t.call(e)},tt=()=>{var e,t;null==(t=null==(e=C.value)?void 0:e.updatePopper)||t.call(e)},st=t=>{if(e.multiple){let l=e.modelValue.slice();const a=Je(l,v(t));a>-1?(l=[...l.slice(0,a),...l.slice(a+1)],y.cachedOptions.splice(a,1),We(t)):(e.multipleLimit<=0||l.length<e.multipleLimit)&&(l=[...l,v(t)],y.cachedOptions.push(t),Pe(t)),Qe(l),t.created&&Ue(""),e.filterable&&!e.reserveKeyword&&(y.inputValue="")}else y.selectedLabel=m(t),Qe(v(t)),ce.value=!1,Pe(t),t.created||Ae();it()},it=()=>{var e;null==(e=T.value)||e.focus()},rt=(e,t=void 0)=>{const l=ue.value;if(!["forward","backward"].includes(e)||de.value||l.length<=0||Ce.value||$.value)return;if(!ce.value)return je();U(t)&&(t=y.hoveringIndex);let a=-1;"forward"===e?(a=t+1,a>=l.length&&(a=0)):"backward"===e&&(a=t-1,(a<0||a>=l.length)&&(a=l.length-1));const o=l[a];if(h(o)||"Group"===o.type)return rt(e,a);y.hoveringIndex=a,pt(a)},ut=()=>{e.multiple?y.hoveringIndex=ue.value.findIndex((t=>e.modelValue.some((e=>Xe(e)===Xe(v(t)))))):y.hoveringIndex=ue.value.findIndex((t=>Xe(v(t))===Xe(e.modelValue)))},dt=t=>{if(y.inputValue=t.target.value,!e.remote)return _e();qe()},pt=e=>{R.value.scrollToItem(e)},ft=(e,t)=>{const l=Xe(e);if(Ve.value.has(l)){const{option:e}=Ve.value.get(l);return e}if(t&&t.length){const e=t.find((e=>Xe(v(e))===l));if(e)return e}return{[f.value.value]:e,[f.value.label]:e}},mt=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const t=y.cachedOptions.slice();y.cachedOptions.length=0,y.previousValue=e.modelValue.toString();for(const l of e.modelValue){const e=ft(l,t);y.cachedOptions.push(e)}}else y.cachedOptions=[],y.previousValue=void 0;else if(me.value){y.previousValue=e.modelValue;const l=ue.value,a=l.findIndex((t=>Xe(v(t))===Xe(e.modelValue)));~a?y.selectedLabel=m(l[a]):y.selectedLabel&&!t||(y.selectedLabel=Xe(e.modelValue))}else y.selectedLabel="",y.previousValue=void 0;Ae(),ze()};return W((()=>e.fitInputWidth),(()=>{ze()})),W(ce,(l=>{l?(e.persistent||ze(),Ue("")):(y.inputValue="",y.previousQuery=null,y.isBeforeHide=!0,Ke("")),t("visible-change",l)})),W((()=>e.modelValue),((t,l)=>{var a;(!t||ne(t)&&0===t.length||e.multiple&&!nt(t.toString(),y.previousValue)||!e.multiple&&Xe(t)!==Xe(y.previousValue))&&mt(!0),!nt(t,l)&&e.validateEvent&&(null==(a=null==n?void 0:n.validate)||a.call(n,"change").catch((e=>le())))}),{deep:!0}),W((()=>e.options),(()=>{const e=T.value;(!e||e&&document.activeElement!==e)&&mt()}),{deep:!0,flush:"post"}),W((()=>ue.value),(()=>(ze(),R.value&&H(R.value.resetScrollTop)))),oe((()=>{y.isBeforeHide||Oe()})),oe((()=>{const{valueKey:t,options:l}=e,a=new Map;for(const e of l){const l=v(e);let o=l;if(_(o)&&(o=u(l,t)),a.get(o))break;a.set(o,!0)}})),B((()=>{mt()})),se(O,Ye),se(V,Ze),se(R,et),se(K,et),se(k,tt),se(L,(()=>{y.collapseItemWidth=L.value.getBoundingClientRect().width})),{inputId:c,collapseTagSize:Me,currentPlaceholder:Be,expanded:ce,emptyText:xe,popupHeight:fe,debounce:ye,allOptions:q,filteredOptions:ue,iconComponent:he,iconReverse:ge,tagStyle:Ee,collapseTagStyle:ke,popperSize:w,dropdownMenuVisible:Ne,hasModelValue:me,shouldShowPlaceholder:Le,selectDisabled:de,selectSize:Te,needStatusIcon:pe,showClearBtn:ve,states:y,isFocused:P,nsSelect:a,nsInput:o,inputRef:T,menuRef:R,tagMenuRef:k,tooltipRef:I,tagTooltipRef:C,selectRef:O,wrapperRef:K,selectionRef:V,prefixRef:M,suffixRef:z,collapseItemRef:L,popperRef:$e,validateState:be,validateIcon:Se,showTagList:Fe,collapseTagList:He,debouncedOnInputChange:qe,deleteTag:(l,a)=>{let o=e.modelValue.slice();const s=Je(o,v(a));s>-1&&!de.value&&(o=[...e.modelValue.slice(0,s),...e.modelValue.slice(s+1)],y.cachedOptions.splice(s,1),Qe(o),t("remove-tag",v(a)),We(a)),l.stopPropagation(),it()},getLabel:m,getValue:v,getDisabled:h,getValueKey:Xe,handleClear:()=>{let l;l=ne(e.modelValue)?[]:b.value,y.selectedLabel="",ce.value=!1,Qe(l),t("clear"),Ae(),it()},handleClickOutside:e=>{if(ce.value=!1,P.value){const t=new FocusEvent("focus",e);A(t)}},handleDel:l=>{if(e.multiple&&(l.code!==j.delete&&0===y.inputValue.length)){l.preventDefault();const a=e.modelValue.slice(),o=ot(a,(e=>!y.cachedOptions.some((t=>v(t)===e&&h(t)))));if(o<0)return;const s=a[o];a.splice(o,1);const n=y.cachedOptions[o];y.cachedOptions.splice(o,1),We(n),Qe(a),t("remove-tag",s)}},handleEsc:()=>{y.inputValue.length>0?y.inputValue="":ce.value=!1},focus:it,blur:()=>{var e;if(ce.value)return ce.value=!1,void H((()=>{var e;return null==(e=T.value)?void 0:e.blur()}));null==(e=T.value)||e.blur()},handleMenuEnter:()=>(y.isBeforeHide=!1,H((()=>{~De.value&&pt(y.hoveringIndex)}))),handleResize:Ye,resetSelectionWidth:Ze,updateTooltip:et,updateTagTooltip:tt,updateOptions:Oe,toggleMenu:je,scrollTo:pt,onInput:dt,onKeyboardNavigate:rt,onKeyboardSelect:()=>{if(!ce.value)return je();~y.hoveringIndex&&ue.value[y.hoveringIndex]&&st(ue.value[y.hoveringIndex])},onSelect:st,onHover:e=>{y.hoveringIndex=null!=e?e:-1},handleCompositionStart:D,handleCompositionEnd:N,handleCompositionUpdate:F}};const zt=Ce(e(t({name:"ElSelectV2",components:{ElSelectMenu:Ct,ElTag:Ee,ElTooltip:ze,ElIcon:Oe},directives:{ClickOutside:it},props:dt,emits:ft,setup(e,{emit:t}){const l=r((()=>{const{modelValue:t,multiple:l}=e,a=l?[]:void 0;return ne(t)?l?t:a:l?a:t})),a=Mt(Z({...Ve(e),modelValue:l}),t),{calculatorRef:o,inputStyle:s}=st();Ie(vt,{props:Z({...Ve(e),height:a.popupHeight,modelValue:l}),expanded:a.expanded,tooltipRef:a.tooltipRef,onSelect:a.onSelect,onHover:a.onHover,onKeyboardNavigate:a.onKeyboardNavigate,onKeyboardSelect:a.onKeyboardSelect});const n=r((()=>e.multiple?a.states.cachedOptions.map((e=>e.label)):a.states.selectedLabel));return{...a,modelValue:l,selectedLabel:n,calculatorRef:o,inputStyle:s}}}),[["render",function(e,t,i,r,u,c){const d=ue("el-tag"),p=ue("el-tooltip"),f=ue("el-icon"),m=ue("el-select-menu"),v=ce("click-outside");return de((a(),l("div",{ref:"selectRef",class:n([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:t=>e.states.inputHovering=!0,onMouseleave:t=>e.states.inputHovering=!1},[P(p,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:t=>e.states.isBeforeHide=!1},{default:pe((()=>[O("div",{ref:"wrapperRef",class:n([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:V(e.toggleMenu,["prevent"])},[e.$slots.prefix?(a(),l("div",{key:0,ref:"prefixRef",class:n(e.nsSelect.e("prefix"))},[w(e.$slots,"prefix")],2)):he("v-if",!0),O("div",{ref:"selectionRef",class:n([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?w(e.$slots,"tag",{key:0},(()=>[(a(!0),l(z,null,be(e.showTagList,(t=>(a(),l("div",{key:e.getValueKey(e.getValue(t)),class:n(e.nsSelect.e("selected-item"))},[P(d,{closable:!e.selectDisabled&&!e.getDisabled(t),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:s(e.tagStyle),onClose:l=>e.deleteTag(l,t)},{default:pe((()=>[O("span",{class:n(e.nsSelect.e("tags-text"))},[w(e.$slots,"label",{label:e.getLabel(t),value:e.getValue(t)},(()=>[Se(o(e.getLabel(t)),1)]))],2)])),_:2},1032,["closable","size","type","effect","style","onClose"])],2)))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(a(),ge(p,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:pe((()=>[O("div",{ref:"collapseItemRef",class:n(e.nsSelect.e("selected-item"))},[P(d,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:s(e.collapseTagStyle),"disable-transitions":""},{default:pe((()=>[O("span",{class:n(e.nsSelect.e("tags-text"))}," + "+o(e.modelValue.length-e.maxCollapseTags),3)])),_:1},8,["size","type","effect","style"])],2)])),content:pe((()=>[O("div",{ref:"tagMenuRef",class:n(e.nsSelect.e("selection"))},[(a(!0),l(z,null,be(e.collapseTagList,(t=>(a(),l("div",{key:e.getValueKey(e.getValue(t)),class:n(e.nsSelect.e("selected-item"))},[P(d,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(t),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:l=>e.deleteTag(l,t)},{default:pe((()=>[O("span",{class:n(e.nsSelect.e("tags-text"))},[w(e.$slots,"label",{label:e.getLabel(t),value:e.getValue(t)},(()=>[Se(o(e.getLabel(t)),1)]))],2)])),_:2},1032,["closable","size","type","effect","onClose"])],2)))),128))],2)])),_:3},8,["disabled","effect","teleported"])):he("v-if",!0)])):he("v-if",!0),O("div",{class:n([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[de(O("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":t=>e.states.inputValue=t,style:s(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:n([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[ye(V((t=>e.onKeyboardNavigate("backward")),["stop","prevent"]),["up"]),ye(V((t=>e.onKeyboardNavigate("forward")),["stop","prevent"]),["down"]),ye(V(e.onKeyboardSelect,["stop","prevent"]),["enter"]),ye(V(e.handleEsc,["stop","prevent"]),["esc"]),ye(V(e.handleDel,["stop"]),["delete"])],onClick:V(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[xe,e.states.inputValue]]),e.filterable?(a(),l("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:n(e.nsSelect.e("input-calculator")),textContent:o(e.states.inputValue)},null,10,["textContent"])):he("v-if",!0)],2),e.shouldShowPlaceholder?(a(),l("div",{key:1,class:n([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?w(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},(()=>[O("span",null,o(e.currentPlaceholder),1)])):(a(),l("span",{key:1},o(e.currentPlaceholder),1))],2)):he("v-if",!0)],2),O("div",{ref:"suffixRef",class:n(e.nsSelect.e("suffix"))},[e.iconComponent?de((a(),ge(f,{key:0,class:n([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:pe((()=>[(a(),ge(T(e.iconComponent)))])),_:1},8,["class"])),[[we,!e.showClearBtn]]):he("v-if",!0),e.showClearBtn&&e.clearIcon?(a(),ge(f,{key:1,class:n([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:V(e.handleClear,["prevent","stop"])},{default:pe((()=>[(a(),ge(T(e.clearIcon)))])),_:1},8,["class","onClick"])):he("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(a(),ge(f,{key:2,class:n([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading","validating"===e.validateState)])},{default:pe((()=>[(a(),ge(T(e.validateIcon)))])),_:1},8,["class"])):he("v-if",!0)],2)],10,["onClick"])])),content:pe((()=>[P(m,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},fe({default:pe((t=>[w(e.$slots,"default",me(ve(t)))])),_:2},[e.$slots.header?{name:"header",fn:pe((()=>[O("div",{class:n(e.nsSelect.be("dropdown","header"))},[w(e.$slots,"header")],2)]))}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:pe((()=>[O("div",{class:n(e.nsSelect.be("dropdown","loading"))},[w(e.$slots,"loading")],2)]))}:e.loading||0===e.filteredOptions.length?{name:"empty",fn:pe((()=>[O("div",{class:n(e.nsSelect.be("dropdown","empty"))},[w(e.$slots,"empty",{},(()=>[O("span",null,o(e.emptyText),1)]))],2)]))}:void 0,e.$slots.footer?{name:"footer",fn:pe((()=>[O("div",{class:n(e.nsSelect.be("dropdown","footer"))},[w(e.$slots,"footer")],2)]))}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])])),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[v,e.handleClickOutside,e.popperRef]])}],["__file","select.vue"]]));export{zt as E,St as F};
