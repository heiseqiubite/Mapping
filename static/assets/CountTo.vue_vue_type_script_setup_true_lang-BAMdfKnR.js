import{d as a,av as t,b as l,q as e,bu as r,J as n,I as s,U as i,a as o,c as u,o as c,t as p,n as m,cK as d}from"./index-B3EiCo2S.js";const V=a({__name:"CountTo",props:{startVal:t.number.def(0),endVal:t.number.def(2021),duration:t.number.def(3e3),autoplay:t.bool.def(!0),decimals:t.number.validate((a=>a>=0)).def(0),decimal:t.string.def("."),separator:t.string.def(","),prefix:t.string.def(""),suffix:t.string.def(""),useEasing:t.bool.def(!0),easingFn:{type:Function,default:(a,t,l,e)=>l*(1-Math.pow(2,-10*a/e))*1024/1023+t}},emits:["mounted","callback"],setup(a,{expose:t,emit:V}){const{getPrefixCls:f}=l(),F=f("count-to"),g=a,b=V,S=a=>{const{decimals:t,decimal:l,separator:e,suffix:r,prefix:n}=g;a=Number(a).toFixed(t);const s=(a+="").split(".");let i=s[0];const o=s.length>1?l+s[1]:"",u=/(\d+)(\d{3})/;if(e&&!d(e))for(;u.test(i);)i=i.replace(u,"$1"+e+"$2");return n+i+o+r},A=e({localStartVal:g.startVal,displayValue:S(g.startVal),printVal:null,paused:!1,localDuration:g.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),x=r(A,"displayValue");n((()=>{g.autoplay&&y(),b("mounted")}));const D=s((()=>g.startVal>g.endVal));i([()=>g.startVal,()=>g.endVal],(()=>{g.autoplay&&y()}));const y=()=>{const{startVal:a,duration:t}=g;A.localStartVal=a,A.startTime=null,A.localDuration=t,A.paused=!1,A.rAF=requestAnimationFrame(v)},T=()=>{cancelAnimationFrame(A.rAF)},q=()=>{A.startTime=null,A.localDuration=+A.remaining,A.localStartVal=+A.printVal,requestAnimationFrame(v)},v=a=>{const{useEasing:t,easingFn:l,endVal:e}=g;A.startTime||(A.startTime=a),A.timestamp=a;const r=a-A.startTime;A.remaining=A.localDuration-r,t?o(D)?A.printVal=A.localStartVal-l(r,0,A.localStartVal-e,A.localDuration):A.printVal=l(r,A.localStartVal,e-A.localStartVal,A.localDuration):o(D)?A.printVal=A.localStartVal-(A.localStartVal-e)*(r/A.localDuration):A.printVal=A.localStartVal+(e-A.localStartVal)*(r/A.localDuration),o(D)?A.printVal=A.printVal<e?e:A.printVal:A.printVal=A.printVal>e?e:A.printVal,A.displayValue=S(A.printVal),r<A.localDuration?A.rAF=requestAnimationFrame(v):b("callback")};return t({pauseResume:()=>{A.paused?(q(),A.paused=!1):(T(),A.paused=!0)},reset:()=>{A.startTime=null,cancelAnimationFrame(A.rAF),A.displayValue=S(g.startVal)},start:y,pause:T}),(a,t)=>(c(),u("span",{class:m(o(F))},p(x.value),3))}});export{V as _};
