import{d as e,f as a,dS as l,r as t,q as r,i as o,o as n,w as u,g as i,a as s,E as p,y as d,x as m,t as g}from"./index-CzUwgbbU.js";import{a as c,E as f}from"./el-form-CaL45Rkc.js";import{a as v,E as y}from"./el-col-DrsecgEZ.js";import{E as _}from"./el-divider-8rja45mS.js";import{E as V}from"./el-switch-CTUKVfWi.js";import{r as b}from"./index-CyWn8tDN.js";const h=(e,a,l)=>b.post({url:"/api/fingerprint/data",data:{search:e,pageIndex:a,pageSize:l}}),w=e=>b.post({url:"/api/fingerprint/delete",data:{ids:e}}),x=e({__name:"Detail",props:{closeDialog:{type:Function},getList:{type:Function},fingerprintForm:{}},setup(e){const{t:h}=a(),w=e,{fingerprintForm:x}=l(w),j=t({...x.value}),E=r({name:[{required:!0,message:h("fingerprint.nameMsg"),trigger:"blur"}],rule:[{required:!0,message:h("fingerprint.ruleMsg"),trigger:"blur"}]}),F=t(!1),U=t(),M=async e=>{F.value=!0,e&&await e.validate((async(e,a)=>{if(e){let e;e=""!=j.value.id?await(l=j.value.id,t=j.value.name,r=j.value.rule,o=j.value.category,n=j.value.parent_category,u=j.value.state,b.post({url:"/api/fingerprint/update",data:{id:l,name:t,rule:r,category:o,parent_category:n,state:u}})):await((e,a,l,t,r)=>b.post({url:"/api/fingerprint/add",data:{name:e,rule:a,category:l,parent_category:t,state:r}}))(j.value.name,j.value.rule,j.value.category,j.value.parent_category,j.value.state),200===e.code&&(w.getList(),w.closeDialog()),F.value=!1}else F.value=!1;var l,t,r,o,n,u}))};return(e,a)=>(n(),o(s(f),{model:j.value,"label-width":"auto",rules:E,"status-icon":"",ref_key:"ruleFormRef",ref:U},{default:u((()=>[i(s(c),{label:s(h)("fingerprint.name"),prop:"name"},{default:u((()=>[i(s(p),{modelValue:j.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value.name=e),placeholder:s(h)("fingerprint.nameMsg")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),i(s(c),{label:s(h)("fingerprint.rule"),prop:"rule"},{default:u((()=>[i(s(p),{modelValue:j.value.rule,"onUpdate:modelValue":a[1]||(a[1]=e=>j.value.rule=e),placeholder:s(h)("fingerprint.ruleMsg")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),i(s(c),{label:s(h)("fingerprint.category")},{default:u((()=>[i(s(p),{modelValue:j.value.category,"onUpdate:modelValue":a[2]||(a[2]=e=>j.value.category=e),placeholder:s(h)("fingerprint.category")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),i(s(c),{label:s(h)("fingerprint.parentCategory")},{default:u((()=>[i(s(p),{modelValue:j.value.parent_category,"onUpdate:modelValue":a[3]||(a[3]=e=>j.value.parent_category=e),placeholder:s(h)("fingerprint.parentCategory")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),i(s(c),{label:s(h)("common.state")},{default:u((()=>[i(s(V),{modelValue:j.value.state,"onUpdate:modelValue":a[4]||(a[4]=e=>j.value.state=e),"inline-prompt":"","active-text":s(h)("common.switchAction"),"inactive-text":s(h)("common.switchInactive")},null,8,["modelValue","active-text","inactive-text"])])),_:1},8,["label"]),i(s(_)),i(s(v),null,{default:u((()=>[i(s(y),{span:2,offset:8},{default:u((()=>[i(s(c),null,{default:u((()=>[i(s(d),{type:"primary",onClick:a[5]||(a[5]=e=>M(U.value)),loading:F.value},{default:u((()=>[m(g(s(h)("task.save")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"]))}});export{x as _,w as d,h as g};
