import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DaYN3Raa.js";import{d as t,f as a,r as l,q as o,g as i,M as s,F as r,O as n,J as p,c as m,o as u,w as d,a as c,h as g,x as f,t as j,E as v,y,P as _,Q as h}from"./index-Bsz_-kew.js";import{a as x,E as b}from"./el-col-CstzfiNs.js";import{E as w}from"./el-text-LCHv_yYZ.js";import{_ as S}from"./Table.vue_vue_type_script_lang-DEQW24mX.js";import{u as k}from"./useTable-DOsThTKn.js";import{u as T}from"./useIcon-CR_HcNa1.js";import{f as C,h as A}from"./index-DhTuOjm6.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-CCL6sVJk.js";import z from"./DetailTemplate-D15bCnIS.js";import"./el-card-DHQ8n2iG.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-DexwxjEf.js";import"./index-I44EMqWl.js";import"./el-table-column-CDjS8A0j.js";import"./isArrayLikeObject-DvVlT94e.js";import"./index-BS16aHrW.js";import"./debounce-Bd5c_m29.js";import"./el-checkbox-C6S6n9Ra.js";import"./raf-CfAM2lGy.js";import"./el-tag-BK85rvDV.js";import"./el-pagination-C7pJ8QU5.js";import"./el-select-CsCiNFSq.js";import"./strings-zWyb0xsZ.js";import"./castArray-BltnW2TK.js";import"./index--g20Cokp.js";import"./el-image-viewer-D8G6B48i.js";import"./el-empty-IOBAAoiF.js";import"./tsxHelper-D30aWQ_5.js";import"./el-dropdown-item-CWLlQn2E.js";import"./refs-CimMBFwC.js";import"./index-CVJINu6s.js";import"./index-DpC9HCFr.js";import"./el-switch-DvKrBy-d.js";import"./el-form-BuXRuL0p.js";import"./el-virtual-list-Dx78Fvg-.js";import"./el-select-v2-Bkw3mN9B.js";/* empty css                */import"./index-DfBP4C7Z.js";import"./index-kK6Ub8M_.js";const D={class:"mb-10px"},L={style:{position:"relative",top:"12px"}};function P(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!h(e)}const U=t({__name:"ScanTemplate",setup(t){const h=T({icon:"iconoir:search"}),{t:U}=a(),N=l(""),O=()=>{W()},V=o([{field:"selection",type:"selection",minWidth:55},{field:"name",label:U("task.templateName")},{field:"action",label:U("tableDemo.action"),formatter:(e,t,a)=>{let l,o;return i(r,null,[i(s,{type:"success",onClick:()=>ne(e.id)},P(l=U("common.edit"))?l:{default:()=>[l]}),i(s,{type:"danger",onClick:()=>$(e)},P(o=U("common.delete"))?o:{default:()=>[o]})])}}]),{tableRegister:H,tableState:I,tableMethods:R}=k({fetchDataApi:async()=>{const{currentPage:e,pageSize:t}=I,a=await A(N.value,e.value,t.value);return{list:a.data.list,total:a.data.total}},immediate:!0}),{loading:M,dataList:F,total:q,currentPage:B,pageSize:J}=I;J.value=20;const{getList:W,getElTableExpose:K}=R;function Q(){return{background:"var(--el-fill-color-light)"}}const G=l(!1);let X=U("task.addTemplate");const Y=()=>{G.value=!1},Z=async()=>{n({title:"Delete",draggable:!0}).then((async()=>{await le()}))},$=async e=>{n({title:"Delete",draggable:!0}).then((async()=>{await te(e)}))},ee=l(!1),te=async e=>{ee.value=!0;try{await C([e.id]);ee.value=!1,W()}catch(t){ee.value=!1,W()}},ae=l([]),le=async()=>{const e=await K(),t=(null==e?void 0:e.getSelectionRows())||[];ae.value=t.map((e=>e.id)),ee.value=!0;try{await C(ae.value);ee.value=!1,W()}catch(a){ee.value=!1,W()}};p((()=>{ie(),window.addEventListener("resize",ie)}));const oe=l(0),ie=()=>{const e=window.innerHeight||document.documentElement.clientHeight;oe.value=.8*e},se=async()=>{re.value="",X=U("task.addTemplate"),G.value=!0},re=l(""),ne=async e=>{re.value=e,X=U("task.editTemplate"),G.value=!0};return(t,a)=>(u(),m(r,null,[i(c(e),null,{default:d((()=>[i(c(x),null,{default:d((()=>[i(c(b),{span:1},{default:d((()=>[i(c(w),{class:"mx-1",style:{position:"relative",top:"8px"}},{default:d((()=>[f(j(c(U)("task.templateName"))+": ",1)])),_:1})])),_:1}),i(c(b),{span:5},{default:d((()=>[i(c(v),{modelValue:N.value,"onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),placeholder:c(U)("common.inputText"),style:{height:"38px"}},null,8,["modelValue","placeholder"])])),_:1}),i(c(b),{span:5,style:{position:"relative",left:"16px"}},{default:d((()=>[i(c(y),{type:"primary",icon:c(h),style:{height:"100%"},onClick:O},{default:d((()=>[f("Search")])),_:1},8,["icon"])])),_:1})])),_:1}),i(c(x),null,{default:d((()=>[i(c(b),{style:{position:"relative",top:"16px"}},{default:d((()=>[g("div",D,[i(c(s),{type:"primary",onClick:se},{default:d((()=>[f(j(c(U)("task.addTemplate")),1)])),_:1}),i(c(s),{type:"danger",loading:ee.value,onClick:Z},{default:d((()=>[f(j(c(U)("task.deleteTemplate")),1)])),_:1},8,["loading"])])])),_:1})])),_:1}),g("div",L,[i(c(S),{"tooltip-options":{offset:1,showArrow:!1,effect:"dark",enterable:!1,showAfter:0,popperOptions:{},popperClass:"test",placement:"bottom",hideAfter:0,disabled:!0},pageSize:c(J),"onUpdate:pageSize":a[1]||(a[1]=e=>_(J)?J.value=e:null),currentPage:c(B),"onUpdate:currentPage":a[2]||(a[2]=e=>_(B)?B.value=e:null),columns:V,data:c(F),stripe:"",border:!0,loading:c(M),"max-height":oe.value,resizable:!0,pagination:{total:c(q),pageSizes:[20,30,50,100,200,500,1e3]},onRegister:c(H),headerCellStyle:Q,style:{fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji"}},null,8,["pageSize","currentPage","columns","data","loading","max-height","pagination","onRegister"])])])),_:1}),i(c(E),{modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),title:c(X),center:"",fullscreen:"",style:{"border-radius":"15px","box-shadow":"5px 5px 10px rgb(0 0 0 / 30%)"}},{default:d((()=>[i(z,{closeDialog:Y,getList:c(W),id:re.value},null,8,["getList","id"])])),_:1},8,["modelValue","title"])],64))}});export{U as default};
